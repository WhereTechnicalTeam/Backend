<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Home GFELTP</title>
	<link href='https://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700,600' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="/static/feltp/css/font-awesome.css">
	<link rel="stylesheet" href="/static/feltp/css/bootstrap.min.css">
	<link rel="stylesheet" href="/static/feltp/css/animate.css">
	<link rel="stylesheet" href="/static/feltp/css/prettyPhoto.css">
	<!-- <link href="/static/feltp/css/public_style.css" rel="stylesheet"> -->
	<link href="/static/feltp/css/style2.css" rel="stylesheet">
	<link href="/static/feltp/css/responsive.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
    

	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
</head>
<body>


<header>
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#"><img src="img/gflep_logo.jpg" alt=""></a>
			</div>
			<div class="collapse navbar-collapse" id="myNavbar">
				<ul class="nav navbar-nav navbar-right">

					<li class=" smooth-scroll"><a href="https://ghanafeltp.net/">Public Site</a></li>
				<!-- 	{% if user.is_authenticated %} -->
					
					<li class="smooth-scroll"><a href="{% url 'newsfeed' %}">DASHBOARD</a></li>
					<li class="smooth-scroll"><a href="{% url 'newMap' %}">Map</a></li>
					<!-- {% endif %} -->
					<!-- <li class="smooth-scroll"><a href="#gallery">GALLERY</a></li>
					
					<li class="smooth-scroll"><a href="#price">EVENT</a></li>
					<li class="smooth-scroll"><a href="#news">NEWS</a></li>
					<li class="smooth-scroll"><a href="#contact">MAP</a></li> --> 
					
                <li>
				<!-- user profile -->
				<div class="profile">
					{% if not user.is_authenticated %}
					<a href="{% url 'login' %}" class="name">Login</a>
					{% endif %}
					{% if user.is_authenticated %}
					<a href="" class="name">{{user}}</a>
					<!-- more menu -->
					<ul class="menu">
						<li><a href="{% url 'logout_view' %}">Log out</a></li>
					</ul>
					{% endif %}
				</div>
			</li>
				</ul>
			</div>
		</div>
	</nav>
	<br>
</header>



<!--our news area-->
<section id="news">
	<div class="section-heading news-heading text-center text-uppercase wow swing">
		<!-- <h3 ><span style="color: white;"0>Your Profile</span></h3> -->
	</div>
	<div class="container">
		<div class="contact-form"><br><br><br><br>
		<div class="container1" style="margin: 0 15%; width: 70%; border-radius: 10px; box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px; border: 1px solid; padding:20px; background-color: #f7f7f7!important;">
			<h3 ><span style="color: grey;">Your Profile</span></h3><br>
			<div class="row">
				<form method="POST" enctype="multipart/form-data" id='profile'>
					{% csrf_token %}

					<div class="col-sm-4">
						<label for="usr">Email</label>
						<input type="email" class="form-control" id="email" name="email" value="{{prof.firstname}}">
					</div>

					<div class="col-sm-4">
						<label for="usr">Password</label>
						<input type="password" class="form-control" id="" name="password" value="{{prof.firstname}}" style="height: 40px;"><br><br>
					</div>

					<div class="col-sm-4">
						<label for="usr">Confirm Password</label>
						<input type="password" class="form-control" id="" name="cpassword" value="{{prof.firstname}}" style="height: 40px;"><br><br>
					</div><br>

					<div class="col-sm-4">
						<label for="usr">First Name</label>
						<input type="text" class="form-control" id="" name="firstname" value="{{prof.firstname}}">
					</div>

					<div class="col-sm-4">
						<label for="usr">Last Name</label>
						<input type="text" class="form-control" id="" name="surname" value="{{prof.surname}}">
					</div>

					<div class="col-sm-4">
						<label for="usr">Primary Phone</label>
						<input type="number" class="form-control" id="" name="phone1" value="{{prof.phone1}}">
					</div>

					<div class="col-sm-4">
						<label for="usr">Secondary Phone</label>
						<input type="number" class="form-control" id="" name="phone2" value="{{prof.phone2}}">
					</div>

					<div class="col-sm-4">
						<label for="trainedfront">Trained in Frontline</label>
    					<select class="form-control" id="trainedfront" name="is_trained_frontline">
    						<option value="{{prof.is_trained_frontline}}">Select an Option</option>
      						<option value="Yes">Yes</option>
      						<option value="No">No</option>
                        </select>
					</div>

					<div class="col-sm-4 front" style="display: none;">
						<label for="usr">Cohort Number(Frontline)</label>
						<input type="text" class="form-control" id="" name="cohort_number_frontline" value="{{prof.cohort_number_frontline}}">
					</div>

					<div class="col-sm-4 front" style="display: none;">
						<label for="usr">Year of Completion(Frontline)</label>
						<input type="text" class="form-control" id="" name="yr_completed_frontline" value="{{prof.yr_completed_frontline}}">
					</div>

                    <div class="col-sm-4 front" style="display: none;">
						<label for="usr">Institution/Department at enrolment(Frontline)</label>
						<input type="text" class="form-control" id="" name="institution_enrolled_at_frontline" value="{{prof.institution_enrolled_at_frontline}}"> 
					</div>

					<div class="col-sm-4 front" style="display: none;">
						<label for="usr">Job Title at Enrolment(Frontline)</label>
						<input type="text" class="form-control" id="" name="job_title_at_enroll_frontline" value="{{prof.job_title_at_enroll_frontline}}">
					</div>

					<div class="col-sm-4">
						<label for="trainedInter">Trained at Intermediate level</label>
    					<select class="form-control" id="trainedInter" name="is_trained_intermediate" style="height: 40px;">
    						<option value="">Select an Option</option>
      						<option value="Yes">Yes</option>
      						<option value="No">No</option>
                        </select><br>
					</div>

					<div class="col-sm-4 intermediate" style="float: right; display: none;">
						<label for="usr">Cohort (Intermediate) </label>
						<input type="text" class="form-control" id="" name="cohort_number_intermediate" value="{{prof.cohort_number_intermediate}}">
					</div>

					<div class="col-sm-4 intermediate" style="display: none;">
						<label for="usr">Year of Completion(Intermediate)</label>
						<input type="text" class="form-control" id="" name="yr_completed_intermediate" value="{{prof.yr_completed_intermediate}}"><br>
					</div>
					
					<div class="col-sm-4 intermediate" style="display: none;">
						<label for="usr">Institution/Dept at enrolment(Intermediate) </label>
						<input type="text" class="form-control" id="" name="institution_enrolled_at_intermediate" value="{{prof.institution_enrolled_at_intermediate}}">
					</div>

					<div class="col-sm-4 intermediate" style="display: none;">
						<label for="usr">Job Title at Enrolment(Intermediate)</label>
						<input type="text" class="form-control" id="" name="job_title_at_enroll_intermediate" value="{{prof.job_title_at_enroll_intermediate}}">
					</div>

					<div class="col-sm-4">
						<label for="trainedAdvance">Trained at Advanced level</label>
    					<select class="form-control" id="trainedAdvance" name="is_trained_advanced" style="height: 40px;">
    						<option value="">Select an Option</option>
      						<option value="Yes">Yes</option>
      						<option value="No">No</option>
                        </select><br>
					</div>

					<div class="col-sm-4 advance" style="float: right; display: none;">
						<label for="usr">Cohort(Advanced)</label>
						<input type="text" class="form-control" id="" name="cohort_number_advanced" value="{{prof.cohort_number_advanced}}">
					</div>

					<div class="col-sm-4 advance" style="display: none;">
						<label for="usr">Year of Completion(Advanced)</label>
						<input type="text" class="form-control" id="" name="yr_completed_advanced" value="{{prof.yr_completed_advanced}}">
					</div>

					<div class="col-sm-4 advance" style="display: none;">
						<label for="usr">Institution/Depart at enrolment(Advanced)</label>
						<input type="text" class="form-control" id="" name="institution_enrolled_at_advanced" value="{{prof.institution_enrolled_at_advanced}}">
					</div>

					<div class="col-sm-4 advance" style="display: none;">
						<label for="usr">Job Title at Enrolment(Advanced)</label>
						<input type="text" class="form-control" id="" name="job_title_at_enroll_advanced" value="{{prof.job_title_at_enroll_advanced}}">
					</div>





					<div class="col-sm-4">
						<label for="usr">Current Institution/ Department</label>
						<input type="text" class="form-control" id="" name="current_institution" value="{{job.current_institution}}">
					</div>

					<div class="col-sm-4">
						<label for="usr">Current Job Title</label>
						<input type="text" class="form-control" id="" name="job_title" value="{{job.job_title}}">
					</div>

					<div class="col-sm-4">
						<label for="usr">Region(Current)</label>
						<select class="form-control" name="region" id="region" style="height: 40px;">
      						<option value="">Select an Option</option>
      						{% for a in regions %}
      						<option value="{{a.id}}">{{a.region_name}}</option>
      						{% endfor %}
      					
                        </select><br>
					</div>

					<div class="col-sm-4">
						<label for="district">District (Current)</label>
						<select class="form-control" name="district" id="district" style="height: 40px;">
      						<option value="">Select an Option</option>
                         </select><br>
					</div>
					
					<div class="col-sm-4">
						<label for="is_current">Is this your current job</label>
    					<select class="form-control" id="trainedAdvance" name="is_current" style="height: 40px;">
    						<option value="">Select an Option</option>
      						<option value="Yes">Yes</option>
      						<option value="No">No</option>
                        </select><br>
					</div>

					<div class="col-sm-4">
						<label for="levelHealthSys">Level of Health System(Nat/Reg/District)</label>
    					<select class="form-control" id="levelHealthSys" name="level_of_health_system" style="height: 40px;">
    						<option value="">Select an Option</option>
      						<option value=1>National</option>
      						<option value=2>Regional</option>
      						<option value=3>District</option>
                           </select><br>
					</div>

					<div class="col-sm-4" >
						<label for="usr">Longitude</label>
						<input type="text" class="form-control" id="" name="longitude" value="{{job.longitude}}">
					</div>

					<div class="col-sm-4" >
						<label for="usr">Latitude</label>
						<input type="text" class="form-control" id="" name="latitude" value="{{job.latitude}}">
					</div>
				

					
    
  
					<div class="col-sm-12">
						<button type="submit" class="btn btn-primary" id="sub">Submit</button>
					</div>

				</form>
			</div>
		</div>
	</div><br><br><br><br>

	</div>
</section>

<script src="/static/feltp/js/jquery-1.11.3.min.js"></script>
<script src="/static/feltp/js/bootstrap.min.js"></script>
<script src="/static/feltp/js/isotope.2.2.2min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js"></script>
<script src="/static/feltp/js/wow.min.js"></script>
<script src="/static/feltp/js/jquery.prettyPhoto.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
<script src="/static/feltp/js/main.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>

<script type="text/javascript">

// ######################    frontline  show or not
$('#trainedfront').change(function() {
    if($('#trainedfront option:selected').val() == 'Yes'){
        $('.front').css('display', '')
    }
    else{
        $('.front').css('display', 'none')
    }
})


// ######################    intermediate  show or not
$('#trainedInter').change(function() {
    if($('#trainedInter option:selected').val() == 'Yes'){
        $('.intermediate').css('display', '')
    }
    else{
        $('.intermediate').css('display', 'none')
    }
})


// ######################    advanced  show or not
$('#trainedAdvance').change(function() {
    if($('#trainedAdvance option:selected').val() == 'Yes'){
        $('.advance').css('display', '')
    }
    else{
        $('.advance').css('display', 'none')
    }
})

	

	
	// ########################   district populate
    $('#region').change(function() {
    $.get('/districtSelectOption?data='+$('#region option:selected').val(), function(data){

        $('#district').html(data)
       });
    });


    $("#sub").click(function(e){
    e.preventDefault();
    var data = new FormData($('#profile').get(0));
    // console.log(data)
    
var token = '{{csrf_token}}';

    $.ajax({
        url: "/createuser", // same url 'action' in form
        type: 'POST',
        headers: { "X-CSRFToken": token },
        data: data,
        contentType: 'multipart/form-data',
        processData: false,
        contentType: false,
        success: function(data) {
            if(data=="done"){

                Swal.fire('Saved', 'Record has been created', 'success')
                .then(function () {
                        window.location.href="/verifyCode?data="+$('#email').val()
                    
                })

            }


            else if(data=="surname") {
            	Swal.fire('info', 'Fill surname', 'error')
                .then(function () {
                        return false
                    
                })
            }

            else if(data=="exists") {
            	Swal.fire('info', 'Email already exits', 'error')
                .then(function () {
                        return false
                    
                })
            }


            else if(data=="match") {
            	Swal.fire('info', 'Passwords do not match', 'error')
                .then(function () {
                        return false
                    
                })
            }


            else if(data=="fisrtname") {
            	Swal.fire('info', 'Fill fisrt name', 'error')
                .then(function () {
                        return false
                    
                })
            }

            else if(data=="sex") {
            	Swal.fire('info', 'Fill sex', 'error')
                .then(function () {
                        return false
                    
                })
            }

        }
    });
    return false;
})




 


  // if ( window.history.replaceState ) {
  //       window.history.replaceState( null, null, window.location.href );
  //   }


</script>


</body>
</html>
